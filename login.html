<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Amaranth&display=swap" rel="stylesheet">
  <!--Include Animate CSS-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
  <!--Include Font Awesome-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">
  <!--Include Materialize CSS-->
  <link type="text/css" rel="stylesheet" href="./css/materialize.min.css">
  <link type="text/css" rel="stylesheet" href="./css/index.css">
  <title>TripREC</title>
    <style>
        .section{
            margin-top: 10px;
            display:block;
        }
        .cen{
            margin-top: 50px;
            text-align: right;
        }
        .fa-google{
          margin-right:5px;
        }
        .di{
          font-size:15px;
          margin-top: 10px;
          margin-bottom: 10px;
        }
        .responsive-img{
          width:120px;
          height:120px;
        }
        .h4{
          margin-top:0px !important;
        }
    </style>
</head>

<body class="grey lighten-5">

  <!--Contact Section-->
  <section class="section center experience grey lighten-5 section-contact grey-text text-darken-2 scrollspy" id="contact">
    <div class="container center">
      
      <img src="./img/logo/logo.png" alt="TripREC's logo" class="responsive-img">
    
      <h4>Please Login Your Account</h4>
      <h6>If you donâ€™t have an account, create one first</h6>
      <div class="row">
        <form id="login-form" class="col s12 xl10 offset-xl1">
          <div class="row">
            <div class="input-field col s12 m6">
              <i class="material-icons prefix">account_circle</i>
              <input type="text" id="login-email" required>
              <label for="login-email">Email address</label>
              <span class="helper-text" data-error="Kindly provide your email"></span>
            </div>
            <div class="input-field col s12 m6">
              <i class="material-icons prefix">vpn_key</i>
              <input type="password" id="login-password" required>
              <label for="login-password">Your password</label>
              <span class="helper-text" data-error="Kindly provide your password"></span>
            </div>
          </div>
          <div>
            <button class="btn waves-effect waves-light blue-grey" type="submit">login</button>
            <button class="btn waves-effect waves-light blue-grey modal-trigger" data-target="modal-signup">signup</button>
          </div>
          <span class="di grey-text text-lighten-1">or</span>
          <div>
            <button class="btn waves-effect waves-light red" onclick="signinwithgoogle()"><i class="fab fa-google"></i>google sign in</button>
          </div>
        </form>
      </div>
    </div>
  </section>


  <!-- SIGN UP MODAL -->
    <div id="modal-signup" class="modal">
      <div class="modal-content">
        <h4>Sign up</h4><br/>
        <form id="signup-form">
          <div class="input-field">
            <input type="text" id="signup-name" required />
            <label for="signup-name">User name</label>
          </div>
          <div class="input-field">
            <input type="email" id="signup-email" required />
            <label for="signup-email">Email address</label>
          </div>
          <div class="input-field">
            <input type="password" id="signup-password" required />
            <label for="signup-password">Choose password</label>
          </div>
          <div class="cen">
            <button class="btn yellow darken-2 z-depth-0">Cancel</button>
            <button id="signup" class="btn yellow darken-2 z-depth-0">Sign up</button>
          </div>
        </form>
      </div>
    </div>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-database.js"></script>
  <!-- TODO: Add SDKs for Firebase products that you want to use
  https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="database_setup.js"></script>
  <script type="text/javascript" src="./js/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="./js/materialize.min.js"></script>
  <script type="text/javascript" src="./js/materialize-init.js"></script>
  <script type="text/javascript" src="./js/auth.js"></script>
  <script>
    function signinwithgoogle(){
      var provider = new firebase.auth.GoogleAuthProvider();
      //provider.addScope('profile');
      //provider.addScope('email');
      auth.signInWithPopup(provider).then(function(result) {
        // This gives you a Google Access Token.
        var token = result.credential.accessToken;
        console.log(token)
        // The signed-in user info.
        var user = result.user;
        console.log(user)
        window.location.href='nav.html';
      }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // The email of the user's account used.
        var email = error.email;
        // The firebase.auth.AuthCredential type that was used.
        var credential = error.credential;
        // ...
        console.log(errorCode)
      });
    }
  </script>
</body>

</html>